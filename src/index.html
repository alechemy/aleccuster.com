<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Alec Custer</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="author" content="Alec Custer">
    <meta name="description" content="Web developer" />

    <link rel="preload" href="style.css" as="style" />
    <link rel="preload" href="static/YoungSerif-Regular.woff" type="font/woff" crossorigin as="font" />
    <link rel="preload" href="static/YoungSerif-Regular.woff2" type="font/woff2" crossorigin as="font" />
    <link rel="preload" href="index.css" as="style" />

    <link rel="stylesheet" href="index.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="static/apple-touch-icon.png />
    <link rel="icon" type="image/png" sizes="32x32" href="static/favicon-32x32.png />
    <link rel="icon" type="image/png" sizes="16x16" href="static/favicon-16x16.png" />
    <link rel="mask-icon" href="static/safari-pinned-tab.svg" color="#5bbad5" />
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li>Home</li>
          <li><a href="about.html">About</a></li>
          <li><a href="projects.html">Projects</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <h1>Hi! I'm Alec. ðŸ‘‹</h1>
      <p>
        I'm a web developer, tech enthusiast, and music aficionado. <br/>
        I currently work at Xperi.
      </p>
      <br />
      <p>
        <a href="about.html"><i>More about me</i></a>
        <a target="_blank" href="static/Alec-Custer-resume.pdf" rel="noopener"
          ><b>Grab my rÃ©sumÃ© &rarr;</b></a
        >
      </p>
    </main>
    <footer>
      <p>
        <small>ðŸ¦­ Made by Alec Custer (that's me).
          <a
            href="https://github.com/alechemy/aleccuster.com"
            target="_blank"
            rel="noopener">
            <icon>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <g data-name="Layer 2">
                  <rect width="24" height="24" opacity="0" />
                  <path d="M16.24 22a1 1 0 0 1-1-1v-2.6a2.15 2.15 0 0 0-.54-1.66 1 1 0 0 1 .61-1.67C17.75 14.78 20 14 20 9.77a4 4 0 0 0-.67-2.22 2.75 2.75 0 0 1-.41-2.06 3.71 3.71 0 0 0 0-1.41 7.65 7.65 0 0 0-2.09 1.09 1 1 0 0 1-.84.15 10.15 10.15 0 0 0-5.52 0 1 1 0 0 1-.84-.15 7.4 7.4 0 0 0-2.11-1.09 3.52 3.52 0 0 0 0 1.41 2.84 2.84 0 0 1-.43 2.08 4.07 4.07 0 0 0-.67 2.23c0 3.89 1.88 4.93 4.7 5.29a1 1 0 0 1 .82.66 1 1 0 0 1-.21 1 2.06 2.06 0 0 0-.55 1.56V21a1 1 0 0 1-2 0v-.57a6 6 0 0 1-5.27-2.09 3.9 3.9 0 0 0-1.16-.88 1 1 0 1 1 .5-1.94 4.93 4.93 0 0 1 2 1.36c1 1 2 1.88 3.9 1.52a3.89 3.89 0 0 1 .23-1.58c-2.06-.52-5-2-5-7a6 6 0 0 1 1-3.33.85.85 0 0 0 .13-.62 5.69 5.69 0 0 1 .33-3.21 1 1 0 0 1 .63-.57c.34-.1 1.56-.3 3.87 1.2a12.16 12.16 0 0 1 5.69 0c2.31-1.5 3.53-1.31 3.86-1.2a1 1 0 0 1 .63.57 5.71 5.71 0 0 1 .33 3.22.75.75 0 0 0 .11.57 6 6 0 0 1 1 3.34c0 5.07-2.92 6.54-5 7a4.28 4.28 0 0 1 .22 1.67V21a1 1 0 0 1-.94 1z"/>
                </g></svg>
            </icon>
            Source
          </a>
          <a
            href="https://twitter.com/alec_custer"
            target="_blank"
            rel="noopener">
            <icon>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <g data-name="Layer 2">
                  <rect width="24" height="24" opacity="0" />
                  <path d="M8.51 20h-.08a10.87 10.87 0 0 1-4.65-1.09A1.38 1.38 0 0 1 3 17.47a1.41 1.41 0 0 1 1.16-1.18 6.63 6.63 0 0 0 2.54-.89 9.49 9.49 0 0 1-3.51-9.07 1.41 1.41 0 0 1 1-1.15 1.35 1.35 0 0 1 1.43.41 7.09 7.09 0 0 0 4.88 2.75 4.5 4.5 0 0 1 1.41-3.1 4.47 4.47 0 0 1 6.37.19.7.7 0 0 0 .78.1A1.39 1.39 0 0 1 21 7.13a6.66 6.66 0 0 1-1.28 2.6A10.79 10.79 0 0 1 8.51 20zm0-2h.08a8.79 8.79 0 0 0 9.09-8.59 1.32 1.32 0 0 1 .37-.85 5.19 5.19 0 0 0 .62-1 2.56 2.56 0 0 1-1.91-.85A2.45 2.45 0 0 0 15 6a2.5 2.5 0 0 0-1.79.69 2.53 2.53 0 0 0-.72 2.42l.26 1.14-1.17.08a8.3 8.3 0 0 1-6.54-2.4 7.12 7.12 0 0 0 3.73 6.46l.95.54-.63.9a5.62 5.62 0 0 1-2.68 1.92A8.34 8.34 0 0 0 8.5 18zM19 6.65z"/>
                </g></svg>
            </icon>
            Twitter
          </a>
        </small>
      </p>
    </footer>
    <div id="lastfm-widget" class="lastfm-widget now-playing-bar">
      <a id="lastfm-link" href="#" target="_blank" rel="noopener" class="lastfm-bar-link">
        <div class="lastfm-art-container">
          <div id="lastfm-art-placeholder" class="lastfm-art-placeholder"></div>
          <img id="lastfm-art" alt="Album art" />
        </div>
        <div class="lastfm-bar-info">
          <div class="lastfm-bar-track">
            <span id="lastfm-track"></span>
            <span class="lastfm-separator">â€”</span>
            <span id="lastfm-artist" class="lastfm-bar-artist"></span>
          </div>
          <div id="lastfm-time" class="lastfm-bar-time"></div>
        </div>
        <div class="lastfm-bar-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
          </svg>
        </div>
      </a>
    </div>
    <script>
      (function() {
        const RSS_FEED_URL = 'https://lfm.xiffy.nl/PoolsideFM';
        const LASTFM_USERNAME = 'PoolsideFM';

        const widget = document.getElementById('lastfm-widget');
        const artEl = document.getElementById('lastfm-art');
        const trackEl = document.getElementById('lastfm-track');
        const artistEl = document.getElementById('lastfm-artist');
        const timeEl = document.getElementById('lastfm-time');
        const linkEl = document.getElementById('lastfm-link');

        async function fetchRecentTracks() {
          try {
            const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(RSS_FEED_URL)}`);
            const data = await response.json();

            if (data.status !== 'ok' || !data.items || data.items.length === 0) {
              widget.style.display = 'none';
              return;
            }

            const item = data.items[0];

            const titleParts = item.title.split(' - ');
            const artist = titleParts[0] || '';
            const trackName = titleParts.slice(1).join(' - ') || '';

            const isNowPlaying = !item.pubDate;

            displayTrack({
              name: trackName,
              artist: artist,
              image: item.enclosure ? item.enclosure.link : '',
              isNowPlaying: isNowPlaying,
              date: item.pubDate,
              trackUrl: item.link
            });
          } catch (error) {
            console.error('Error fetching Last.FM data:', error);
            widget.style.display = 'none';
          }
        }

        function displayTrack(track) {
          trackEl.textContent = track.name;
          artistEl.textContent = track.artist;

          artEl.classList.remove('loaded');
          if (track.image) {
            artEl.onload = () => {
              artEl.classList.add('loaded');
            };
            artEl.onerror = () => {
              artEl.classList.remove('loaded');
            };
            artEl.src = track.image;
          } else {
            artEl.src = '';
          }

          if (track.isNowPlaying) {
            timeEl.textContent = 'Listening now';
            widget.classList.add('is-playing');
          } else if (track.date) {
            timeEl.textContent = formatTime(track.date);
            widget.classList.remove('is-playing');
          } else {
            timeEl.textContent = '';
            widget.classList.remove('is-playing');
          }

          linkEl.href = track.trackUrl || `https://www.last.fm/user/${LASTFM_USERNAME}`;
        }

        function formatTime(timestamp) {
          const date = new Date(timestamp);
          const now = new Date();
          const diff = Math.floor((now - date) / 1000); // seconds

          if (diff < 60) return 'Just now';
          if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;
          if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;
          if (diff < 604800) return `${Math.floor(diff / 86400)}d ago`;
          return date.toLocaleDateString();
        }

        // Initial fetch
        fetchRecentTracks();

        // Refresh every 60 seconds
        setInterval(fetchRecentTracks, 60000);
      })();
    </script>
  </body>
</html>
